(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}})();const Ia="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ia);let yt=!1,Da=!1;function Ka(){yt=!0}Ka();const Fa=1,Ba=2,Or=4,ja=8,Ha=16,Ua=1,Va=2,qa=4,Wa=8,Ya=16,za=1,Ga=2,ie=Symbol(),Ar="http://www.w3.org/1999/xhtml",jn=!1;var Xn=Array.isArray,Za=Array.prototype.indexOf,wt=Array.prototype.includes,Qn=Array.from,Ja=Object.defineProperty,Pt=Object.getOwnPropertyDescriptor,Tr=Object.getOwnPropertyDescriptors,Xa=Object.prototype,Qa=Array.prototype,$n=Object.getPrototypeOf;const $a=()=>{};function el(e){return e()}function Hn(e){for(var t=0;t<e.length;t++)e[t]()}function Lr(){var e,t,n=new Promise((a,r)=>{e=a,t=r});return{promise:n,resolve:e,reject:t}}function tl(e,t){if(Array.isArray(e))return e;if(!(Symbol.iterator in e))return Array.from(e);const n=[];for(const a of e)if(n.push(a),n.length===t)break;return n}const se=2,It=4,Ut=8,Pr=1<<24,We=16,Me=32,xt=64,nl=128,we=512,re=1024,ue=2048,Se=4096,me=8192,Ue=16384,Vt=32768,Dt=65536,pr=1<<17,Nr=1<<18,cn=1<<19,Rr=1<<20,je=1<<25,ct=65536,Un=1<<21,er=1<<22,Xe=1<<23,Ve=Symbol("$state"),rl=Symbol("legacy props"),it=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function al(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ll(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function il(e,t,n){throw new Error("https://svelte.dev/e/each_key_duplicate")}function sl(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ol(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ul(e){throw new Error("https://svelte.dev/e/effect_orphan")}function fl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function cl(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function dl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function vl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function _l(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function pl(){console.warn("https://svelte.dev/e/select_multiple_invalid_value")}function Ir(e){return e===this.v}function hl(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function Dr(e){return!hl(e,this.v)}let Q=null;function ln(e){Q=e}function dn(e,t=!1,n){Q={p:Q,i:!1,c:null,e:null,s:e,x:null,l:yt&&!t?{s:null,u:null,$:[]}:null}}function vn(e){var t=Q,n=t.e;if(n!==null){t.e=null;for(var a of n)Qr(a)}return e!==void 0&&(t.x=e),t.i=!0,Q=t.p,e??{}}function qt(){return!yt||Q!==null&&Q.l===null}let st=[];function Kr(){var e=st;st=[],Hn(e)}function Kt(e){if(st.length===0&&!Nt){var t=st;queueMicrotask(()=>{t===st&&Kr()})}st.push(e)}function ml(){for(;st.length>0;)Kr()}function bl(e){var t=V;if(t===null)return R.f|=Xe,e;if((t.f&Vt)===0&&(t.f&It)===0)throw e;sn(e,t)}function sn(e,t){for(;t!==null;){if((t.f&nl)!==0){if((t.f&Vt)===0)throw e;try{t.b.error(e);return}catch(n){e=n}}t=t.parent}throw e}const gl=-7169;function te(e,t){e.f=e.f&gl|t}function tr(e){(e.f&we)!==0||e.deps===null?te(e,re):te(e,Se)}function Fr(e){if(e!==null)for(const t of e)(t.f&se)===0||(t.f&ct)===0||(t.f^=ct,Fr(t.deps))}function wl(e,t,n){(e.f&ue)!==0?t.add(e):(e.f&Se)!==0&&n.add(e),Fr(e.deps),te(e,re)}const nn=new Set;let D=null,on=null,Ee=null,_e=[],_n=null,Vn=!1,Nt=!1;class pn{committed=!1;current=new Map;previous=new Map;#t=new Set;#n=new Set;#e=0;#r=0;#i=null;#s=new Set;#a=new Set;#l=new Map;is_fork=!1;#o=!1;is_deferred(){return this.is_fork||this.#r>0}skip_effect(t){this.#l.has(t)||this.#l.set(t,{d:[],m:[]})}unskip_effect(t){var n=this.#l.get(t);if(n){this.#l.delete(t);for(var a of n.d)te(a,ue),He(a);for(a of n.m)te(a,Se),He(a)}}process(t){_e=[],this.apply();var n=[],a=[];for(const r of t)this.#u(r,n,a);if(this.is_deferred()){this.#f(a),this.#f(n);for(const[r,l]of this.#l)Ur(r,l)}else{for(const r of this.#t)r();this.#t.clear(),this.#e===0&&this.#c(),on=this,D=null,hr(a),hr(n),on=null,this.#i?.resolve()}Ee=null}#u(t,n,a){t.f^=re;for(var r=t.first,l=null;r!==null;){var s=r.f,u=(s&(Me|xt))!==0,o=u&&(s&re)!==0,c=o||(s&me)!==0||this.#l.has(r);if(!c&&r.fn!==null){u?r.f^=re:l!==null&&(s&(It|Ut|Pr))!==0?l.b.defer_effect(r):(s&It)!==0?n.push(r):Et(r)&&((s&We)!==0&&this.#a.add(r),dt(r));var f=r.first;if(f!==null){r=f;continue}}var b=r.parent;for(r=r.next;r===null&&b!==null;)b===l&&(l=null),r=b.next,b=b.parent}}#f(t){for(var n=0;n<t.length;n+=1)wl(t[n],this.#s,this.#a)}capture(t,n){n!==ie&&!this.previous.has(t)&&this.previous.set(t,n),(t.f&Xe)===0&&(this.current.set(t,t.v),Ee?.set(t,t.v))}activate(){D=this,this.apply()}deactivate(){D===this&&(D=null,Ee=null)}flush(){if(this.activate(),_e.length>0){if(Br(),D!==null&&D!==this)return}else this.#e===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#n)t(this);this.#n.clear()}#c(){if(nn.size>1){this.previous.clear();var t=Ee,n=!0;for(const r of nn){if(r===this){n=!1;continue}const l=[];for(const[u,o]of this.current){if(r.current.has(u))if(n&&o!==r.current.get(u))r.current.set(u,o);else continue;l.push(u)}if(l.length===0)continue;const s=[...r.current.keys()].filter(u=>!this.current.has(u));if(s.length>0){var a=_e;_e=[];const u=new Set,o=new Map;for(const c of l)jr(c,s,u,o);if(_e.length>0){D=r,r.apply();for(const c of _e)r.#u(c,[],[]);r.deactivate()}_e=a}}D=null,Ee=t}this.committed=!0,nn.delete(this)}increment(t){this.#e+=1,t&&(this.#r+=1)}decrement(t){this.#e-=1,t&&(this.#r-=1),!this.#o&&(this.#o=!0,Kt(()=>{this.#o=!1,this.is_deferred()?_e.length>0&&this.flush():this.revive()}))}revive(){for(const t of this.#s)this.#a.delete(t),te(t,ue),He(t);for(const t of this.#a)te(t,Se),He(t);this.flush()}oncommit(t){this.#t.add(t)}ondiscard(t){this.#n.add(t)}settled(){return(this.#i??=Lr()).promise}static ensure(){if(D===null){const t=D=new pn;nn.add(D),Nt||Kt(()=>{D===t&&t.flush()})}return D}apply(){}}function yl(e){var t=Nt;Nt=!0;try{for(var n;;){if(ml(),_e.length===0&&(D?.flush(),_e.length===0))return _n=null,n;Br()}}finally{Nt=t}}function Br(){Vn=!0;var e=null;try{for(var t=0;_e.length>0;){var n=pn.ensure();if(t++>1e3){var a,r;xl()}n.process(_e),Qe.clear()}}finally{_e=[],Vn=!1,_n=null}}function xl(){try{fl()}catch(e){sn(e,_n)}}let Be=null;function hr(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var a=e[n++];if((a.f&(Ue|me))===0&&Et(a)&&(Be=new Set,dt(a),a.deps===null&&a.first===null&&a.nodes===null&&a.teardown===null&&a.ac===null&&na(a),Be?.size>0)){Qe.clear();for(const r of Be){if((r.f&(Ue|me))!==0)continue;const l=[r];let s=r.parent;for(;s!==null;)Be.has(s)&&(Be.delete(s),l.push(s)),s=s.parent;for(let u=l.length-1;u>=0;u--){const o=l[u];(o.f&(Ue|me))===0&&dt(o)}}Be.clear()}}Be=null}}function jr(e,t,n,a){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const r of e.reactions){const l=r.f;(l&se)!==0?jr(r,t,n,a):(l&(er|We))!==0&&(l&ue)===0&&Hr(r,t,a)&&(te(r,ue),He(r))}}function Hr(e,t,n){const a=n.get(e);if(a!==void 0)return a;if(e.deps!==null)for(const r of e.deps){if(wt.call(t,r))return!0;if((r.f&se)!==0&&Hr(r,t,n))return n.set(r,!0),!0}return n.set(e,!1),!1}function He(e){for(var t=_n=e;t.parent!==null;){t=t.parent;var n=t.f;if(Vn&&t===V&&(n&We)!==0&&(n&Nr)===0)return;if((n&(xt|Me))!==0){if((n&re)===0)return;t.f^=re}}_e.push(t)}function Ur(e,t){if(!((e.f&Me)!==0&&(e.f&re)!==0)){(e.f&ue)!==0?t.d.push(e):(e.f&Se)!==0&&t.m.push(e),te(e,re);for(var n=e.first;n!==null;)Ur(n,t),n=n.next}}function El(e,t,n,a){const r=qt()?Wt:nr;var l=e.filter(v=>!v.settled);if(n.length===0&&l.length===0){a(t.map(r));return}var s=D,u=V,o=kl(),c=l.length===1?l[0].promise:l.length>1?Promise.all(l.map(v=>v.promise)):null;function f(v){o();try{a(v)}catch(w){(u.f&Ue)===0&&sn(w,u)}s?.deactivate(),qn()}if(n.length===0){c.then(()=>f(t.map(r)));return}function b(){o(),Promise.all(n.map(v=>Sl(v))).then(v=>f([...t.map(r),...v])).catch(v=>sn(v,u))}c?c.then(b):b()}function kl(){var e=V,t=R,n=Q,a=D;return function(l=!0){et(e),Re(t),ln(n),l&&a?.activate()}}function qn(){et(null),Re(null),ln(null)}function Wt(e){var t=se|ue,n=R!==null&&(R.f&se)!==0?R:null;return V!==null&&(V.f|=cn),{ctx:Q,deps:null,effects:null,equals:Ir,f:t,fn:e,reactions:null,rv:0,v:ie,wv:0,parent:n??V,ac:null}}function Sl(e,t,n){let a=V;a===null&&ll();var r=a.b,l=void 0,s=Ft(ie),u=!R,o=new Map;return jl(()=>{var c=Lr();l=c.promise;try{Promise.resolve(e()).then(c.resolve,c.reject).then(()=>{f===D&&f.committed&&f.deactivate(),qn()})}catch(w){c.reject(w),qn()}var f=D;if(u){var b=r.is_rendered();r.update_pending_count(1),f.increment(b),o.get(f)?.reject(it),o.delete(f),o.set(f,c)}const v=(w,g=void 0)=>{if(f.activate(),g)g!==it&&(s.f|=Xe,Bt(s,g));else{(s.f&Xe)!==0&&(s.f^=Xe),Bt(s,w);for(const[A,p]of o){if(o.delete(A),A===f)break;p.reject(it)}}u&&(r.update_pending_count(-1),f.decrement(b))};c.promise.then(v,w=>v(null,w||"unknown"))}),mn(()=>{for(const c of o.values())c.reject(it)}),new Promise(c=>{function f(b){function v(){b===l?c(s):f(l)}b.then(v,v)}f(l)})}function Wn(e){const t=Wt(e);return la(t),t}function nr(e){const t=Wt(e);return t.equals=Dr,t}function Ml(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)qe(t[n])}}function Cl(e){for(var t=e.parent;t!==null;){if((t.f&se)===0)return(t.f&Ue)===0?t:null;t=t.parent}return null}function rr(e){var t,n=V;et(Cl(e));try{e.f&=~ct,Ml(e),t=ua(e)}finally{et(n)}return t}function Vr(e){var t=rr(e);if(!e.equals(t)&&(e.wv=sa(),(!D?.is_fork||e.deps===null)&&(e.v=t,e.deps===null))){te(e,re);return}$e||(Ee!==null?(Xr()||D?.is_fork)&&Ee.set(e,t):tr(e))}function Ol(e){if(e.effects!==null)for(const t of e.effects)(t.teardown||t.ac)&&(t.teardown?.(),t.ac?.abort(it),t.teardown=$a,t.ac=null,Ht(t,0),ar(t))}function qr(e){if(e.effects!==null)for(const t of e.effects)t.teardown&&dt(t)}let Yn=new Set;const Qe=new Map;let Wr=!1;function Ft(e,t){var n={f:0,v:e,reactions:null,equals:Ir,rv:0,wv:0};return n}function Ge(e,t){const n=Ft(e);return la(n),n}function C(e,t=!1,n=!0){const a=Ft(e);return t||(a.equals=Dr),yt&&n&&Q!==null&&Q.l!==null&&(Q.l.s??=[]).push(a),a}function d(e,t,n=!1){R!==null&&(!ke||(R.f&pr)!==0)&&qt()&&(R.f&(se|We|er|pr))!==0&&(ye===null||!wt.call(ye,e))&&_l();let a=n?gt(t):t;return Bt(e,a)}function Bt(e,t){if(!e.equals(t)){var n=e.v;$e?Qe.set(e,t):Qe.set(e,n),e.v=t;var a=pn.ensure();if(a.capture(e,n),(e.f&se)!==0){const r=e;(e.f&ue)!==0&&rr(r),tr(r)}e.wv=sa(),Yr(e,ue),qt()&&V!==null&&(V.f&re)!==0&&(V.f&(Me|xt))===0&&(ge===null?ql([e]):ge.push(e)),!a.is_fork&&Yn.size>0&&!Wr&&Al()}return t}function Al(){Wr=!1;for(const e of Yn)(e.f&re)!==0&&te(e,Se),Et(e)&&dt(e);Yn.clear()}function Dn(e){d(e,e.v+1)}function Yr(e,t){var n=e.reactions;if(n!==null)for(var a=qt(),r=n.length,l=0;l<r;l++){var s=n[l],u=s.f;if(!(!a&&s===V)){var o=(u&ue)===0;if(o&&te(s,t),(u&se)!==0){var c=s;Ee?.delete(c),(u&ct)===0&&(u&we&&(s.f|=ct),Yr(c,Se))}else o&&((u&We)!==0&&Be!==null&&Be.add(s),He(s))}}}function gt(e){if(typeof e!="object"||e===null||Ve in e)return e;const t=$n(e);if(t!==Xa&&t!==Qa)return e;var n=new Map,a=Xn(e),r=Ge(0),l=ft,s=u=>{if(ft===l)return u();var o=R,c=ft;Re(null),wr(l);var f=u();return Re(o),wr(c),f};return a&&n.set("length",Ge(e.length)),new Proxy(e,{defineProperty(u,o,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&dl();var f=n.get(o);return f===void 0?s(()=>{var b=Ge(c.value);return n.set(o,b),b}):d(f,c.value,!0),!0},deleteProperty(u,o){var c=n.get(o);if(c===void 0){if(o in u){const f=s(()=>Ge(ie));n.set(o,f),Dn(r)}}else d(c,ie),Dn(r);return!0},get(u,o,c){if(o===Ve)return e;var f=n.get(o),b=o in u;if(f===void 0&&(!b||Pt(u,o)?.writable)&&(f=s(()=>{var w=gt(b?u[o]:ie),g=Ge(w);return g}),n.set(o,f)),f!==void 0){var v=i(f);return v===ie?void 0:v}return Reflect.get(u,o,c)},getOwnPropertyDescriptor(u,o){var c=Reflect.getOwnPropertyDescriptor(u,o);if(c&&"value"in c){var f=n.get(o);f&&(c.value=i(f))}else if(c===void 0){var b=n.get(o),v=b?.v;if(b!==void 0&&v!==ie)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return c},has(u,o){if(o===Ve)return!0;var c=n.get(o),f=c!==void 0&&c.v!==ie||Reflect.has(u,o);if(c!==void 0||V!==null&&(!f||Pt(u,o)?.writable)){c===void 0&&(c=s(()=>{var v=f?gt(u[o]):ie,w=Ge(v);return w}),n.set(o,c));var b=i(c);if(b===ie)return!1}return f},set(u,o,c,f){var b=n.get(o),v=o in u;if(a&&o==="length")for(var w=c;w<b.v;w+=1){var g=n.get(w+"");g!==void 0?d(g,ie):w in u&&(g=s(()=>Ge(ie)),n.set(w+"",g))}if(b===void 0)(!v||Pt(u,o)?.writable)&&(b=s(()=>Ge(void 0)),d(b,gt(c)),n.set(o,b));else{v=b.v!==ie;var A=s(()=>gt(c));d(b,A)}var p=Reflect.getOwnPropertyDescriptor(u,o);if(p?.set&&p.set.call(f,c),!v){if(a&&typeof o=="string"){var E=n.get("length"),k=Number(o);Number.isInteger(k)&&k>=E.v&&d(E,k+1)}Dn(r)}return!0},ownKeys(u){i(r);var o=Reflect.ownKeys(u).filter(b=>{var v=n.get(b);return v===void 0||v.v!==ie});for(var[c,f]of n)f.v!==ie&&!(c in u)&&o.push(c);return o},setPrototypeOf(){vl()}})}function mr(e){try{if(e!==null&&typeof e=="object"&&Ve in e)return e[Ve]}catch{}return e}function Tl(e,t){return Object.is(mr(e),mr(t))}var Ll,Pl,Nl;function ut(e=""){return document.createTextNode(e)}function un(e){return Pl.call(e)}function Yt(e){return Nl.call(e)}function m(e,t){return un(e)}function zr(e,t=!1){{var n=un(e);return n instanceof Comment&&n.data===""?Yt(n):n}}function _(e,t=1,n=!1){let a=e;for(;t--;)a=Yt(a);return a}function Rl(e){e.textContent=""}function Gr(){return!1}function Il(e,t,n){return document.createElementNS(Ar,e,void 0)}let br=!1;function Dl(){br||(br=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function hn(e){var t=R,n=V;Re(null),et(null);try{return e()}finally{Re(t),et(n)}}function Zr(e,t,n,a=n){e.addEventListener(t,()=>hn(n));const r=e.__on_r;r?e.__on_r=()=>{r(),a(!0)}:e.__on_r=()=>a(!0),Dl()}function Jr(e){V===null&&(R===null&&ul(),ol()),$e&&sl()}function Kl(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Ye(e,t,n){var a=V;a!==null&&(a.f&me)!==0&&(e|=me);var r={ctx:Q,deps:null,nodes:null,f:e|ue|we,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{dt(r)}catch(u){throw qe(r),u}else t!==null&&He(r);var l=r;if(n&&l.deps===null&&l.teardown===null&&l.nodes===null&&l.first===l.last&&(l.f&cn)===0&&(l=l.first,(e&We)!==0&&(e&Dt)!==0&&l!==null&&(l.f|=Dt)),l!==null&&(l.parent=a,a!==null&&Kl(l,a),R!==null&&(R.f&se)!==0&&(e&xt)===0)){var s=R;(s.effects??=[]).push(l)}return r}function Xr(){return R!==null&&!ke}function mn(e){const t=Ye(Ut,null,!1);return te(t,re),t.teardown=e,t}function zn(e){Jr();var t=V.f,n=!R&&(t&Me)!==0&&(t&Vt)===0;if(n){var a=Q;(a.e??=[]).push(e)}else return Qr(e)}function Qr(e){return Ye(It|Rr,e,!1)}function Fl(e){return Jr(),Ye(Ut|Rr,e,!0)}function $r(e){return Ye(It,e,!1)}function Kn(e,t){var n=Q,a={effect:null,ran:!1,deps:e};n.l.$.push(a),a.effect=bn(()=>{e(),!a.ran&&(a.ran=!0,B(t))})}function Bl(){var e=Q;bn(()=>{for(var t of e.l.$){t.deps();var n=t.effect;(n.f&re)!==0&&n.deps!==null&&te(n,Se),Et(n)&&dt(n),t.ran=!1}})}function jl(e){return Ye(er|cn,e,!0)}function bn(e,t=0){return Ye(Ut|t,e,!0)}function Y(e,t=[],n=[],a=[]){El(a,t,n,r=>{Ye(Ut,()=>e(...r.map(i)),!0)})}function ea(e,t=0){var n=Ye(We|t,e,!0);return n}function jt(e){return Ye(Me|cn,e,!0)}function ta(e){var t=e.teardown;if(t!==null){const n=$e,a=R;gr(!0),Re(null);try{t.call(null)}finally{gr(n),Re(a)}}}function ar(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const r=n.ac;r!==null&&hn(()=>{r.abort(it)});var a=n.next;(n.f&xt)!==0?n.parent=null:qe(n,t),n=a}}function Hl(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Me)===0&&qe(t),t=n}}function qe(e,t=!0){var n=!1;(t||(e.f&Nr)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(Ul(e.nodes.start,e.nodes.end),n=!0),ar(e,t&&!n),Ht(e,0),te(e,Ue);var a=e.nodes&&e.nodes.t;if(a!==null)for(const l of a)l.stop();ta(e);var r=e.parent;r!==null&&r.first!==null&&na(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function Ul(e,t){for(;e!==null;){var n=e===t?null:Yt(e);e.remove(),e=n}}function na(e){var t=e.parent,n=e.prev,a=e.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),t!==null&&(t.first===e&&(t.first=a),t.last===e&&(t.last=n))}function lr(e,t,n=!0){var a=[];ra(e,a,!0);var r=()=>{n&&qe(e),t&&t()},l=a.length;if(l>0){var s=()=>--l||r();for(var u of a)u.out(s)}else r()}function ra(e,t,n){if((e.f&me)===0){e.f^=me;var a=e.nodes&&e.nodes.t;if(a!==null)for(const u of a)(u.is_global||n)&&t.push(u);for(var r=e.first;r!==null;){var l=r.next,s=(r.f&Dt)!==0||(r.f&Me)!==0&&(e.f&We)!==0;ra(r,t,s?n:!1),r=l}}}function ir(e){aa(e,!0)}function aa(e,t){if((e.f&me)!==0){e.f^=me,(e.f&re)===0&&(te(e,ue),He(e));for(var n=e.first;n!==null;){var a=n.next,r=(n.f&Dt)!==0||(n.f&Me)!==0;aa(n,r?t:!1),n=a}var l=e.nodes&&e.nodes.t;if(l!==null)for(const s of l)(s.is_global||t)&&s.in()}}function Vl(e,t){if(e.nodes)for(var n=e.nodes.start,a=e.nodes.end;n!==null;){var r=n===a?null:Yt(n);t.append(n),n=r}}let an=!1,$e=!1;function gr(e){$e=e}let R=null,ke=!1;function Re(e){R=e}let V=null;function et(e){V=e}let ye=null;function la(e){R!==null&&(ye===null?ye=[e]:ye.push(e))}let pe=null,he=0,ge=null;function ql(e){ge=e}let ia=1,ot=0,ft=ot;function wr(e){ft=e}function sa(){return++ia}function Et(e){var t=e.f;if((t&ue)!==0)return!0;if(t&se&&(e.f&=~ct),(t&Se)!==0){for(var n=e.deps,a=n.length,r=0;r<a;r++){var l=n[r];if(Et(l)&&Vr(l),l.wv>e.wv)return!0}(t&we)!==0&&Ee===null&&te(e,re)}return!1}function oa(e,t,n=!0){var a=e.reactions;if(a!==null&&!(ye!==null&&wt.call(ye,e)))for(var r=0;r<a.length;r++){var l=a[r];(l.f&se)!==0?oa(l,t,!1):t===l&&(n?te(l,ue):(l.f&re)!==0&&te(l,Se),He(l))}}function ua(e){var t=pe,n=he,a=ge,r=R,l=ye,s=Q,u=ke,o=ft,c=e.f;pe=null,he=0,ge=null,R=(c&(Me|xt))===0?e:null,ye=null,ln(e.ctx),ke=!1,ft=++ot,e.ac!==null&&(hn(()=>{e.ac.abort(it)}),e.ac=null);try{e.f|=Un;var f=e.fn,b=f();e.f|=Vt;var v=e.deps,w=D?.is_fork;if(pe!==null){var g;if(w||Ht(e,he),v!==null&&he>0)for(v.length=he+pe.length,g=0;g<pe.length;g++)v[he+g]=pe[g];else e.deps=v=pe;if(Xr()&&(e.f&we)!==0)for(g=he;g<v.length;g++)(v[g].reactions??=[]).push(e)}else!w&&v!==null&&he<v.length&&(Ht(e,he),v.length=he);if(qt()&&ge!==null&&!ke&&v!==null&&(e.f&(se|Se|ue))===0)for(g=0;g<ge.length;g++)oa(ge[g],e);if(r!==null&&r!==e){if(ot++,r.deps!==null)for(let A=0;A<n;A+=1)r.deps[A].rv=ot;if(t!==null)for(const A of t)A.rv=ot;ge!==null&&(a===null?a=ge:a.push(...ge))}return(e.f&Xe)!==0&&(e.f^=Xe),b}catch(A){return bl(A)}finally{e.f^=Un,pe=t,he=n,ge=a,R=r,ye=l,ln(s),ke=u,ft=o}}function Wl(e,t){let n=t.reactions;if(n!==null){var a=Za.call(n,e);if(a!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[a]=n[r],n.pop())}}if(n===null&&(t.f&se)!==0&&(pe===null||!wt.call(pe,t))){var l=t;(l.f&we)!==0&&(l.f^=we,l.f&=~ct),tr(l),Ol(l),Ht(l,0)}}function Ht(e,t){var n=e.deps;if(n!==null)for(var a=t;a<n.length;a++)Wl(e,n[a])}function dt(e){var t=e.f;if((t&Ue)===0){te(e,re);var n=V,a=an;V=e,an=!0;try{(t&(We|Pr))!==0?Hl(e):ar(e),ta(e);var r=ua(e);e.teardown=typeof r=="function"?r:null,e.wv=ia;var l;jn&&Da&&(e.f&ue)!==0&&e.deps}finally{an=a,V=n}}}async function Yl(){await Promise.resolve(),yl()}function i(e){var t=e.f,n=(t&se)!==0;if(R!==null&&!ke){var a=V!==null&&(V.f&Ue)!==0;if(!a&&(ye===null||!wt.call(ye,e))){var r=R.deps;if((R.f&Un)!==0)e.rv<ot&&(e.rv=ot,pe===null&&r!==null&&r[he]===e?he++:pe===null?pe=[e]:pe.push(e));else{(R.deps??=[]).push(e);var l=e.reactions;l===null?e.reactions=[R]:wt.call(l,R)||l.push(R)}}}if($e&&Qe.has(e))return Qe.get(e);if(n){var s=e;if($e){var u=s.v;return((s.f&re)===0&&s.reactions!==null||ca(s))&&(u=rr(s)),Qe.set(s,u),u}var o=(s.f&we)===0&&!ke&&R!==null&&(an||(R.f&we)!==0),c=(s.f&Vt)===0;Et(s)&&(o&&(s.f|=we),Vr(s)),o&&!c&&(qr(s),fa(s))}if(Ee?.has(e))return Ee.get(e);if((e.f&Xe)!==0)throw e.v;return e.v}function fa(e){if(e.f|=we,e.deps!==null)for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&se)!==0&&(t.f&we)===0&&(qr(t),fa(t))}function ca(e){if(e.v===ie)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Qe.has(t)||(t.f&se)!==0&&ca(t))return!0;return!1}function B(e){var t=ke;try{return ke=!0,e()}finally{ke=t}}function da(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Ve in e)Gn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Ve in n&&Gn(n)}}}function Gn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let a in e)try{Gn(e[a],t)}catch{}const n=$n(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const a=Tr(n);for(let r in a){const l=a[r].get;if(l)try{l.call(e)}catch{}}}}}function zl(e,t,n,a={}){function r(l){if(a.capture||Gl.call(t,l),!l.cancelBubble)return hn(()=>n?.call(this,l))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Kt(()=>{t.addEventListener(e,r,a)}):t.addEventListener(e,r,a),r}function ce(e,t,n,a,r){var l={capture:a,passive:r},s=zl(e,t,n,l);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&mn(()=>{t.removeEventListener(e,s,l)})}let yr=null;function Gl(e){var t=this,n=t.ownerDocument,a=e.type,r=e.composedPath?.()||[],l=r[0]||e.target;yr=e;var s=0,u=yr===e&&e.__root;if(u){var o=r.indexOf(u);if(o!==-1&&(t===document||t===window)){e.__root=t;return}var c=r.indexOf(t);if(c===-1)return;o<=c&&(s=o)}if(l=r[s]||e.target,l!==t){Ja(e,"currentTarget",{configurable:!0,get(){return l||n}});var f=R,b=V;Re(null),et(null);try{for(var v,w=[];l!==null;){var g=l.assignedSlot||l.parentNode||l.host||null;try{var A=l["__"+a];A!=null&&(!l.disabled||e.target===l)&&A.call(l,e)}catch(p){v?w.push(p):v=p}if(e.cancelBubble||g===t||g===null)break;l=g}if(v){for(let p of w)queueMicrotask(()=>{throw p});throw v}}finally{e.__root=t,delete e.currentTarget,Re(f),et(b)}}}const Zl=globalThis?.window?.trustedTypes?.createPolicy("svelte-trusted-html",{createHTML:e=>e});function Jl(e){return Zl?.createHTML(e)??e}function Xl(e,t=!1){var n=Il("template");return e=e.replaceAll("<!>","<!---->"),n.innerHTML=t?Jl(e):e,n.content}function fn(e,t){var n=V;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function H(e,t){var n=(t&za)!==0,a=(t&Ga)!==0,r,l=!e.startsWith("<!>");return()=>{r===void 0&&(r=Xl(l?e:"<!>"+e,!0),n||(r=un(r)));var s=a||Ll?document.importNode(r,!0):r.cloneNode(!0);if(n){var u=un(s),o=s.lastChild;fn(u,o)}else fn(s,s);return s}}function xr(e=""){{var t=ut(e+"");return fn(t,t),t}}function Ql(){var e=document.createDocumentFragment(),t=document.createComment(""),n=ut();return e.append(t,n),fn(t,n),e}function K(e,t){e!==null&&e.before(t)}function oe(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}class $l{anchor;#t=new Map;#n=new Map;#e=new Map;#r=new Set;#i=!0;constructor(t,n=!0){this.anchor=t,this.#i=n}#s=()=>{var t=D;if(this.#t.has(t)){var n=this.#t.get(t),a=this.#n.get(n);if(a)ir(a),this.#r.delete(n);else{var r=this.#e.get(n);r&&(this.#n.set(n,r.effect),this.#e.delete(n),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),a=r.effect)}for(const[l,s]of this.#t){if(this.#t.delete(l),l===t)break;const u=this.#e.get(s);u&&(qe(u.effect),this.#e.delete(s))}for(const[l,s]of this.#n){if(l===n||this.#r.has(l))continue;const u=()=>{if(Array.from(this.#t.values()).includes(l)){var c=document.createDocumentFragment();Vl(s,c),c.append(ut()),this.#e.set(l,{effect:s,fragment:c})}else qe(s);this.#r.delete(l),this.#n.delete(l)};this.#i||!a?(this.#r.add(l),lr(s,u,!1)):u()}}};#a=t=>{this.#t.delete(t);const n=Array.from(this.#t.values());for(const[a,r]of this.#e)n.includes(a)||(qe(r.effect),this.#e.delete(a))};ensure(t,n){var a=D,r=Gr();if(n&&!this.#n.has(t)&&!this.#e.has(t))if(r){var l=document.createDocumentFragment(),s=ut();l.append(s),this.#e.set(t,{effect:jt(()=>n(s)),fragment:l})}else this.#n.set(t,jt(()=>n(this.anchor)));if(this.#t.set(a,t),r){for(const[u,o]of this.#n)u===t?a.unskip_effect(o):a.skip_effect(o);for(const[u,o]of this.#e)u===t?a.unskip_effect(o.effect):a.skip_effect(o.effect);a.oncommit(this.#s),a.ondiscard(this.#a)}else this.#s()}}function va(e){Q===null&&al(),yt&&Q.l!==null?ei(Q).m.push(e):zn(()=>{const t=B(e);if(typeof t=="function")return t})}function ei(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}function xe(e,t,n=!1){var a=new $l(e),r=n?Dt:0;function l(s,u){a.ensure(s,u)}ea(()=>{var s=!1;t((u,o=0)=>{s=!0,l(o,u)}),s||l(!1,null)},r)}function at(e,t){return t}function ti(e,t,n){for(var a=[],r=t.length,l,s=t.length,u=0;u<r;u++){let b=t[u];lr(b,()=>{if(l){if(l.pending.delete(b),l.done.add(b),l.pending.size===0){var v=e.outrogroups;Zn(Qn(l.done)),v.delete(l),v.size===0&&(e.outrogroups=null)}}else s-=1},!1)}if(s===0){var o=a.length===0&&n!==null;if(o){var c=n,f=c.parentNode;Rl(f),f.append(c),e.items.clear()}Zn(t,!o)}else l={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(l)}function Zn(e,t=!0){for(var n=0;n<e.length;n++)qe(e[n],t)}var Er;function lt(e,t,n,a,r,l=null){var s=e,u=new Map,o=(t&Or)!==0;if(o){var c=e;s=c.appendChild(ut())}var f=null,b=nr(()=>{var E=n();return Xn(E)?E:E==null?[]:Qn(E)}),v,w=!0;function g(){p.fallback=f,ni(p,v,s,t,a),f!==null&&(v.length===0?(f.f&je)===0?ir(f):(f.f^=je,Lt(f,null,s)):lr(f,()=>{f=null}))}var A=ea(()=>{v=i(b);for(var E=v.length,k=new Set,T=D,I=Gr(),U=0;U<E;U+=1){var X=v[U],z=a(X,U),j=w?null:u.get(z);j?(j.v&&Bt(j.v,X),j.i&&Bt(j.i,U),I&&T.unskip_effect(j.e)):(j=ri(u,w?s:Er??=ut(),X,z,U,r,t,n),w||(j.e.f|=je),u.set(z,j)),k.add(z)}if(E===0&&l&&!f&&(w?f=jt(()=>l(s)):(f=jt(()=>l(Er??=ut())),f.f|=je)),E>k.size&&il(),!w)if(I){for(const[le,L]of u)k.has(le)||T.skip_effect(L.e);T.oncommit(g),T.ondiscard(()=>{})}else g();i(b)}),p={effect:A,items:u,outrogroups:null,fallback:f};w=!1}function Tt(e){for(;e!==null&&(e.f&Me)===0;)e=e.next;return e}function ni(e,t,n,a,r){var l=(a&ja)!==0,s=t.length,u=e.items,o=Tt(e.effect.first),c,f=null,b,v=[],w=[],g,A,p,E;if(l)for(E=0;E<s;E+=1)g=t[E],A=r(g,E),p=u.get(A).e,(p.f&je)===0&&(p.nodes?.a?.measure(),(b??=new Set).add(p));for(E=0;E<s;E+=1){if(g=t[E],A=r(g,E),p=u.get(A).e,e.outrogroups!==null)for(const L of e.outrogroups)L.pending.delete(p),L.done.delete(p);if((p.f&je)!==0)if(p.f^=je,p===o)Lt(p,null,n);else{var k=f?f.next:o;p===e.effect.last&&(e.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Ze(e,f,p),Ze(e,p,k),Lt(p,k,n),f=p,v=[],w=[],o=Tt(f.next);continue}if((p.f&me)!==0&&(ir(p),l&&(p.nodes?.a?.unfix(),(b??=new Set).delete(p))),p!==o){if(c!==void 0&&c.has(p)){if(v.length<w.length){var T=w[0],I;f=T.prev;var U=v[0],X=v[v.length-1];for(I=0;I<v.length;I+=1)Lt(v[I],T,n);for(I=0;I<w.length;I+=1)c.delete(w[I]);Ze(e,U.prev,X.next),Ze(e,f,U),Ze(e,X,T),o=T,f=X,E-=1,v=[],w=[]}else c.delete(p),Lt(p,o,n),Ze(e,p.prev,p.next),Ze(e,p,f===null?e.effect.first:f.next),Ze(e,f,p),f=p;continue}for(v=[],w=[];o!==null&&o!==p;)(c??=new Set).add(o),w.push(o),o=Tt(o.next);if(o===null)continue}(p.f&je)===0&&v.push(p),f=p,o=Tt(p.next)}if(e.outrogroups!==null){for(const L of e.outrogroups)L.pending.size===0&&(Zn(Qn(L.done)),e.outrogroups?.delete(L));e.outrogroups.size===0&&(e.outrogroups=null)}if(o!==null||c!==void 0){var z=[];if(c!==void 0)for(p of c)(p.f&me)===0&&z.push(p);for(;o!==null;)(o.f&me)===0&&o!==e.fallback&&z.push(o),o=Tt(o.next);var j=z.length;if(j>0){var le=(a&Or)!==0&&s===0?n:null;if(l){for(E=0;E<j;E+=1)z[E].nodes?.a?.measure();for(E=0;E<j;E+=1)z[E].nodes?.a?.fix()}ti(e,z,le)}}l&&Kt(()=>{if(b!==void 0)for(p of b)p.nodes?.a?.apply()})}function ri(e,t,n,a,r,l,s,u){var o=(s&Fa)!==0?(s&Ha)===0?C(n,!1,!1):Ft(n):null,c=(s&Ba)!==0?Ft(r):null;return{v:o,i:c,e:jt(()=>(l(t,o??n,c??r,u),()=>{e.delete(a)}))}}function Lt(e,t,n){if(e.nodes)for(var a=e.nodes.start,r=e.nodes.end,l=t&&(t.f&je)===0?t.nodes.start:n;a!==null;){var s=Yt(a);if(l.before(a),a===r)return;a=s}}function Ze(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function _a(e,t,n=!1){if(e.multiple){if(t==null)return;if(!Xn(t))return pl();for(var a of e.options)a.selected=t.includes(Rt(a));return}for(a of e.options){var r=Rt(a);if(Tl(r,t)){a.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function ai(e){var t=new MutationObserver(()=>{_a(e,e.__value)});t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),mn(()=>{t.disconnect()})}function Fe(e,t,n=t){var a=new WeakSet,r=!0;Zr(e,"change",l=>{var s=l?"[selected]":":checked",u;if(e.multiple)u=[].map.call(e.querySelectorAll(s),Rt);else{var o=e.querySelector(s)??e.querySelector("option:not([disabled])");u=o&&Rt(o)}n(u),D!==null&&a.add(D)}),$r(()=>{var l=t();if(e===document.activeElement){var s=on??D;if(a.has(s))return}if(_a(e,l,r),r&&l===void 0){var u=e.querySelector(":checked");u!==null&&(l=Rt(u),n(l))}e.__value=l,r=!1}),ai(e)}function Rt(e){return"__value"in e?e.__value:e.value}const li=Symbol("is custom element"),ii=Symbol("is html");function Je(e,t,n,a){var r=si(e);r[t]!==(r[t]=n)&&(n==null?e.removeAttribute(t):typeof n!="string"&&oi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function si(e){return e.__attributes??={[li]:e.nodeName.includes("-"),[ii]:e.namespaceURI===Ar}}var kr=new Map;function oi(e){var t=e.getAttribute("is")||e.nodeName,n=kr.get(t);if(n)return n;kr.set(t,n=[]);for(var a,r=e,l=Element.prototype;l!==r;){a=Tr(r);for(var s in a)a[s].set&&n.push(s);r=$n(r)}return n}function ee(e,t,n=t){var a=new WeakSet;Zr(e,"input",async r=>{var l=r?e.defaultValue:e.value;if(l=Fn(e)?Bn(l):l,n(l),D!==null&&a.add(D),await Yl(),l!==(l=t())){var s=e.selectionStart,u=e.selectionEnd,o=e.value.length;if(e.value=l??"",u!==null){var c=e.value.length;s===u&&u===o&&c>o?(e.selectionStart=c,e.selectionEnd=c):(e.selectionStart=s,e.selectionEnd=Math.min(u,c))}}}),B(t)==null&&e.value&&(n(Fn(e)?Bn(e.value):e.value),D!==null&&a.add(D)),bn(()=>{var r=t();if(e===document.activeElement){var l=on??D;if(a.has(l))return}Fn(e)&&r===Bn(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function Fn(e){var t=e.type;return t==="number"||t==="range"}function Bn(e){return e===""?null:+e}function Jn(e,t,n){var a=Pt(e,t);a&&a.set&&(e[t]=n,mn(()=>{e[t]=null}))}function Sr(e,t){return e===t||e?.[Ve]===t}function ui(e={},t,n,a){return $r(()=>{var r,l;return bn(()=>{r=l,l=[],B(()=>{e!==n(...l)&&(t(e,...l),r&&Sr(n(...r),e)&&t(null,...r))})}),()=>{Kt(()=>{l&&Sr(n(...l),e)&&t(null,...l)})}}),e}function fi(e){return function(...t){var n=t[0];return n.preventDefault(),e?.apply(this,t)}}function gn(e=!1){const t=Q,n=t.l.u;if(!n)return;let a=()=>da(t.s);if(e){let r=0,l={};const s=Wt(()=>{let u=!1;const o=t.s;for(const c in o)o[c]!==l[c]&&(l[c]=o[c],u=!0);return u&&r++,r});a=()=>i(s)}n.b.length&&Fl(()=>{Mr(t,a),Hn(n.b)}),zn(()=>{const r=B(()=>n.m.map(el));return()=>{for(const l of r)typeof l=="function"&&l()}}),n.a.length&&zn(()=>{Mr(t,a),Hn(n.a)})}function Mr(e,t){if(e.l.s)for(const n of e.l.s)i(n);t()}let rn=!1;function ci(e){var t=rn;try{return rn=!1,[e(),rn]}finally{rn=t}}function de(e,t,n,a){var r=!yt||(n&Va)!==0,l=(n&Wa)!==0,s=(n&Ya)!==0,u=a,o=!0,c=()=>(o&&(o=!1,u=s?B(a):a),u),f;if(l){var b=Ve in e||rl in e;f=Pt(e,t)?.set??(b&&t in e?T=>e[t]=T:void 0)}var v,w=!1;l?[v,w]=ci(()=>e[t]):v=e[t],v===void 0&&a!==void 0&&(v=c(),f&&(r&&cl(),f(v)));var g;if(r?g=()=>{var T=e[t];return T===void 0?c():(o=!0,T)}:g=()=>{var T=e[t];return T!==void 0&&(u=void 0),T===void 0?u:T},r&&(n&qa)===0)return g;if(f){var A=e.$$legacy;return(function(T,I){return arguments.length>0?((!r||!I||A||w)&&f(I?g():T),T):g()})}var p=!1,E=((n&Ua)!==0?Wt:nr)(()=>(p=!1,g()));l&&i(E);var k=V;return(function(T,I){if(arguments.length>0){const U=I?i(E):r&&l?gt(T):T;return d(E,U),p=!0,u!==void 0&&(u=U),T}return $e&&p||(k.f&Ue)!==0?E.v:i(E)})}const di="data:image/svg+xml,%3csvg%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M3%2012a9%209%200%200%201%2015-6.7L21%208'/%3e%3cpath%20d='M21%203v5h-5'/%3e%3cpath%20d='M21%2012a9%209%200%200%201-15%206.7L3%2016'/%3e%3cpath%20d='M3%2021v-5h5'/%3e%3c/svg%3e",vi="data:image/svg+xml,%3csvg%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M19%2021H5a2%202%200%200%201-2-2V7h18v12a2%202%200%200%201-2%202Z'/%3e%3cpath%20d='M17%207V3H7v4'/%3e%3cpath%20d='M9%2012h6'/%3e%3cpath%20d='M9%2016h6'/%3e%3c/svg%3e";var _i=H('<section class="panel"><div class="flex flex-wrap items-center justify-between gap-2"><h2 class="text-lg font-semibold">1. 全局设置 (Global Settings)</h2> <button class="btn-secondary">应用到当前会话 (Apply)</button></div> <p class="hint mt-1">时间阈值用于规则识别。点击“应用”仅在内存生效，点击顶部“保存到 YAML”才会持久化。</p> <div class="mt-3 grid gap-3 sm:grid-cols-2 lg:grid-cols-5"><label class="text-sm text-slate-300">双击间隔 (ms) <input class="input mt-1" type="number"/></label> <label class="text-sm text-slate-300">短按阈值 (ms) <input class="input mt-1" type="number"/></label> <label class="text-sm text-slate-300">长按阈值 (ms) <input class="input mt-1" type="number"/></label> <label class="text-sm text-slate-300">组合时窗 (ms) <input class="input mt-1" type="number"/></label> <label class="text-sm text-slate-300">规则超时 (ms) <input class="input mt-1" type="number"/></label></div></section>');function pi(e,t){dn(t,!1);let n=de(t,"config",8),a=de(t,"onApply",8),r=C(300),l=C(300),s=C(800),u=C(200),o=C(5e3);function c(L){L&&(d(r,L.doublePressIntervalMs),d(l,L.shortPressMinMs),d(s,L.longPressMinMs),d(u,L.combinationTimeoutMs),d(o,L.ruleTimeoutMs))}va(()=>c(n()));function f(){a()({doublePressIntervalMs:Number(i(r)),shortPressMinMs:Number(i(l)),longPressMinMs:Number(i(s)),combinationTimeoutMs:Number(i(u)),ruleTimeoutMs:Number(i(o))})}var b={loadFromConfig:c};gn();var v=_i(),w=m(v),g=_(m(w),2),A=_(w,4),p=m(A),E=_(m(p)),k=_(p,2),T=_(m(k)),I=_(k,2),U=_(m(I)),X=_(I,2),z=_(m(X)),j=_(X,2),le=_(m(j));return ce("click",g,f),ee(E,()=>i(r),L=>d(r,L)),ee(T,()=>i(l),L=>d(l,L)),ee(U,()=>i(s),L=>d(s,L)),ee(z,()=>i(u),L=>d(u,L)),ee(le,()=>i(o),L=>d(o,L)),K(e,v),Jn(t,"loadFromConfig",c),vn(b)}const pa="data:image/svg+xml,%3csvg%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M12%205v14'/%3e%3cpath%20d='M5%2012h14'/%3e%3c/svg%3e",hi="data:image/svg+xml,%3csvg%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M3%206h18'/%3e%3cpath%20d='M8%206V4h8v2'/%3e%3cpath%20d='M19%206l-1%2014H6L5%206'/%3e%3c/svg%3e",Cr="data:image/svg+xml,%3csvg%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M12%203v7'/%3e%3cpath%20d='m8%207%204%204%204-4'/%3e%3crect%20x='4'%20y='14'%20width='16'%20height='7'%20rx='2'/%3e%3c/svg%3e",mi="data:image/svg+xml,%3csvg%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3cpath%20d='M12%2020h9'/%3e%3cpath%20d='M16.5%203.5a2.1%202.1%200%200%201%203%203L7%2019l-4%201%201-4%2012.5-12.5Z'/%3e%3c/svg%3e";var bi=H('<tr><td colspan="4" class="py-4 text-center text-slate-400">暂无物理按键映射。</td></tr>'),gi=H('<span class="badge bg-sky-500/10 text-sky-300 border-sky-500/20">系统保留</span>'),wi=H('<span class="badge bg-slate-700 text-slate-300 border-slate-600">自定义</span>'),yi=H('<tr class="border-t border-slate-700 hover:bg-slate-800/50"><td class="py-2 px-3 font-mono text-amber-200"> </td><td class="py-2 px-3 font-mono"> </td><td class="py-2 px-3"><!></td><td class="py-2 px-3"><div class="flex gap-2"><button class="text-slate-400 hover:text-white" title="重新识别"><img alt="Learn" class="h-4 w-4"/></button> <button class="text-slate-400 hover:text-white" title="重命名"><img alt="Rename" class="h-4 w-4"/></button> <button class="text-red-400 hover:text-red-300 disabled:opacity-30" title="删除"><img alt="Delete" class="h-4 w-4"/></button></div></td></tr>'),xi=H('<section class="panel mt-4"><h2 class="text-lg font-semibold">2. 按键设置 (Key Setup)</h2> <p class="hint mt-1">管理物理按键映射。支持蓝牙/USB设备按键记忆。 <br/> Reserved: <code>POWER</code>, <code>VOL_UP</code>, <code>VOL_DOWN</code>.</p> <div class="mt-3 grid gap-3 md:grid-cols-[1.2fr_1fr_auto] items-end"><label class="text-sm text-slate-300 w-full">逻辑名称 (Logic Name) <input class="input mt-1 w-full" placeholder="e.g. BT_MOUSE_LEFT"/></label> <label class="text-sm text-slate-300 w-full">Key Code <div class="mt-1 flex gap-2"><input class="input flex-1" type="number" placeholder="123"/> <button class="btn-secondary whitespace-nowrap"><img alt="" class="h-4 w-4"/> </button></div></label> <div><button class="btn-primary w-full md:w-auto"><img alt="" class="h-4 w-4"/> 新增按键</button></div></div> <div class="mt-4 overflow-x-auto rounded border border-slate-700"><table class="min-w-[620px] w-full text-sm"><thead class="bg-slate-800"><tr class="text-left text-slate-300"><th class="py-2 px-3">名称</th><th class="py-2 px-3">keyCode</th><th class="py-2 px-3">类型</th><th class="py-2 px-3">操作</th></tr></thead><tbody><!></tbody></table></div></section>');function Ei(e,t){dn(t,!1);let n=de(t,"hardwareEntries",24,()=>[]),a=de(t,"onAddKey",8),r=de(t,"onDeleteKey",8),l=de(t,"onRenameKey",8),s=de(t,"onLearnNew",8),u=de(t,"onLearnFor",8);const o=new Set(["POWER","VOL_UP","VOL_DOWN"]);let c=C(""),f=C(""),b=C(!1);async function v(){d(b,!0);try{const q=await s()();q!==null&&d(f,String(q))}catch(q){alert(q.message)}finally{d(b,!1)}}function w(){const q=i(c).trim(),be=Number(i(f));if(!q)return alert("Name required");if(!Number.isInteger(be)||be<0)return alert("Invalid code");a()(q,be),d(c,""),d(f,"")}gn();var g=xi(),A=_(m(g),4),p=m(A),E=_(m(p)),k=_(p,2),T=_(m(k)),I=m(T),U=_(I,2),X=m(U),z=_(X),j=_(k,2),le=m(j),L=m(le),Ie=_(A,2),Ce=m(Ie),Oe=_(m(Ce)),Ae=m(Oe);{var Te=q=>{var be=bi();K(q,be)},tt=q=>{var be=Ql(),vt=zr(be);lt(vt,1,n,at,(kt,ae)=>{var ze=yi(),De=m(ze),St=m(De),nt=_(De),_t=m(nt),pt=_(nt),h=m(pt);{var y=N=>{var ve=gi();K(N,ve)},Z=Wn(()=>(i(ae),B(()=>o.has(i(ae).name)))),Ke=N=>{var ve=wi();K(N,ve)};xe(h,N=>{i(Z)?N(y):N(Ke,!1)})}var Le=_(pt),wn=m(Le),ht=m(wn),yn=m(ht),Mt=_(ht,2),F=m(Mt),O=_(Mt,2),P=m(O);Y(N=>{oe(St,(i(ae),B(()=>i(ae).name))),oe(_t,(i(ae),B(()=>i(ae).code))),Je(yn,"src",Cr),Je(F,"src",mi),O.disabled=N,Je(P,"src",hi)},[()=>(i(ae),B(()=>o.has(i(ae).name)))]),ce("click",ht,()=>u()(i(ae))),ce("click",Mt,()=>l()(i(ae))),ce("click",O,()=>r()(i(ae))),K(kt,ze)}),K(q,be)};xe(Ae,q=>{da(n()),B(()=>n().length===0)?q(Te):q(tt,!1)})}Y(()=>{U.disabled=i(b),Je(X,"src",Cr),oe(z,` ${i(b)?"...":"识别"}`),Je(L,"src",pa)}),ee(E,()=>i(c),q=>d(c,q)),ee(I,()=>i(f),q=>d(f,q)),ce("click",U,fi(v)),ce("click",le,w),K(e,g),vn()}var ki=H('<span class="text-xs text-red-400 border border-red-400/30 px-1 rounded">DISABLED</span>'),Si=H('<div class="flex flex-col gap-2 rounded border border-slate-700 bg-slate-800/50 p-3 sm:flex-row sm:items-center sm:justify-between"><div class="flex-1"><div class="flex items-center gap-2"><!> <span class="font-bold text-amber-200"> </span> <span class="text-slate-500">-></span> <span class="text-sky-200 text-sm font-mono"><!></span></div> <p class="text-xs text-slate-500 mt-1"> </p></div> <div class="flex gap-2"><button class="btn-secondary text-xs">编辑</button> <button class="btn-danger text-xs">删除</button></div></div>'),Mi=H('<div class="mb-4 p-3 bg-red-900/30 border border-red-500/50 text-red-200 rounded text-sm"> </div>'),Ci=H('<div class="mb-4 p-3 bg-yellow-900/30 border border-yellow-500/50 text-yellow-200 rounded text-sm">此规则包含多个动作或不支持的类型，编辑已锁定。</div>'),Oi=H("<option> </option>"),Ai=H('<label class="text-sm text-slate-300">KeyCode <input class="input mt-1 w-full" type="number"/></label>'),Ti=H("<option> </option>"),Li=H("<option> </option>"),Pi=H('<label class="text-sm text-slate-300">组合键 (Combo Key) <select class="input mt-1 w-full"></select></label>'),Ni=H("<option> </option>"),Ri=H('<select class="input w-full"></select>'),Ii=H("<option> </option>"),Di=H('<select class="input w-full mb-2"><option>选择应用...</option><!></select>'),Ki=H('<input class="input w-full mb-2" placeholder="搜索应用..."/> <!> <input class="input w-full mb-2" placeholder="Package Name"/> <input class="input w-full" placeholder="Activity (Optional)"/>',1),Fi=H('<textarea class="input w-full h-20" placeholder="e.g. input keyevent 26"></textarea>'),Bi=H('<input class="input w-full" type="number" placeholder="Target Key Code"/>'),ji=H('<select class="input w-full"><option>增大 (Up)</option><option>减小 (Down)</option></select>'),Hi=H('<select class="input w-full"><option>增大 (Up)</option><option>减小 (Down)</option></select>'),Ui=H('<div class="grid gap-2"><input class="input w-full" placeholder="Intent Action (e.g. android.intent.action.VIEW)"/> <input class="input w-full" placeholder="Package (optional)"/> <input class="input w-full" placeholder="Class Name (optional)"/> <input class="input w-full" placeholder="Data URI (optional)"/> <input class="input w-full" placeholder="Categories (comma-separated)"/> <textarea class="input w-full h-16" placeholder="Extras (key=value per line)"></textarea></div>'),Vi=H('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 overflow-y-auto"><div class="w-full max-w-2xl rounded-xl bg-slate-900 border border-slate-700 shadow-2xl p-6"><h3 class="text-xl font-bold mb-4"> </h3> <!> <!> <div class="grid gap-4"><div class="grid grid-cols-2 gap-4"><label class="text-sm text-slate-400">备注 <input class="input mt-1 w-full" placeholder="规则说明..."/></label> <label class="text-sm text-slate-400">状态 <select class="input mt-1 w-full"><option>启用</option><option>禁用</option></select></label></div> <div class="p-3 bg-slate-800/50 rounded border border-slate-700"><h4 class="text-sm font-bold text-amber-400 mb-2 uppercase tracking-wider">Condition (Trigger)</h4> <div class="grid gap-3"><label class="text-sm text-slate-300">类型: <span class="font-mono text-xs bg-slate-700 px-1 rounded">KEY_EVENT</span></label> <div class="grid grid-cols-2 gap-3"><label class="text-sm text-slate-300">主按键 (Key) <select class="input mt-1 w-full"><!><option>手动输入...</option></select></label> <!></div> <div class="grid grid-cols-2 gap-3"><label class="text-sm text-slate-300">行为 (Behavior) <select class="input mt-1 w-full"></select></label> <!></div></div></div> <div class="p-3 bg-slate-800/50 rounded border border-slate-700"><h4 class="text-sm font-bold text-sky-400 mb-2 uppercase tracking-wider">Action</h4> <label class="text-sm text-slate-300">类型 <select class="input mt-1 w-full"><option>系统命令</option><option>启动应用</option><option>运行 Shell</option><option>映射按键</option><option>发送 Intent</option><option>音量控制</option><option>亮度控制</option><option>切换屏幕</option><option>拦截</option></select></label> <div class="mt-3"><!></div></div></div> <div class="flex justify-end gap-3 mt-6"><button class="btn-secondary">取消</button> <button class="btn-primary">确认</button></div></div></div>'),qi=H('<section class="panel mt-4"><div class="flex flex-wrap items-center justify-between gap-2"><h2 class="text-lg font-semibold">3. 规则设置 (Rules)</h2> <button class="btn-primary"><img alt="" class="h-4 w-4"/>新增规则</button></div> <p class="hint mt-1">条件(Condition) -> 行为(Action)。目前仅支持按键触发，未来将扩展更多条件。</p> <div class="mt-3 grid gap-2"></div> <!></section>');function Wi(e,t){dn(t,!1);let n=de(t,"rules",24,()=>[]),a=de(t,"keyOptions",24,()=>[]),r=de(t,"comboOptions",24,()=>[]);de(t,"installedApps",24,()=>[]);let l=de(t,"onSaveRule",8),s=de(t,"onDeleteRule",8),u=de(t,"onSearchApps",8),o=C(!1),c=C(null),f=C(!1),b=C(""),v=C(""),w=C("true"),g=C("116"),A=C(""),p=C("CLICK"),E=C("116"),k=C("builtin_command"),T=C("open_voice_assistant"),I=C(""),U=C(""),X=C(""),z=C(""),j=C(""),le=C(""),L=C(""),Ie=C(""),Ce=C(""),Oe=C(""),Ae=C("up"),Te=C("up"),tt=C(""),q=C([]);const be=new Set(["CLICK","SHORT_PRESS","LONG_PRESS","DOUBLE_CLICK","COMBO_CLICK","COMBO_SHORT_PRESS","COMBO_LONG_PRESS"]),vt=new Set(["COMBO_CLICK","COMBO_SHORT_PRESS","COMBO_LONG_PRESS"]),kt={mute_toggle:"静音切换",open_voice_assistant:"打开语音助手",open_camera:"打开相机",toggle_flashlight:"切换手电筒",toggle_do_not_disturb:"切换勿扰模式"};function ae(){d(c,null),d(f,!1),d(b,""),d(v,""),d(w,"true"),d(g,a().length?String(a()[0].code):"116"),d(A,""),d(p,"CLICK"),d(E,r().length?String(r()[0].code):"116"),d(k,"builtin_command"),d(T,"open_voice_assistant"),d(I,""),d(U,""),d(X,""),d(z,""),d(j,""),d(le,""),d(L,""),d(Ie,""),d(Ce,""),d(Oe,""),d(Ae,"up"),d(Te,"up")}function ze(){ae(),d(o,!0)}function De(F){const O=n()[F];if(ae(),d(c,F),d(v,O.description||""),d(w,O.enabled===!1?"false":"true"),O.conditions&&O.conditions.length>0){const P=O.conditions[0];P.type,d(p,P.behavior||"CLICK"),P.keyCode!=null&&(a().some(N=>N.code===P.keyCode)?d(g,String(P.keyCode)):(d(g,"custom"),d(A,String(P.keyCode)))),d(E,String(P.comboKeyCode||r()[0]?.code||116))}if(O.actions&&O.actions.length>0){const P=O.actions[0];if(d(k,P.type||"builtin_command"),i(k)==="builtin_command")d(T,P.command||"open_voice_assistant");else if(i(k)==="launch_app")d(I,P.package||""),d(U,P.activity||"");else if(i(k)==="run_shell")d(X,P.command||"");else if(i(k)==="send_key")d(z,String(P.keyCode||""));else if(i(k)==="volume_control")d(Ae,P.direction||"up");else if(i(k)==="brightness_control")d(Te,P.direction||"up");else if(i(k)==="launch_intent"){const N=P.intent||{};d(j,N.action||""),d(le,N.package||""),d(L,N.className||""),d(Ie,N.data||""),d(Ce,(N.category||[]).join(",")),d(Oe,N.extras?Object.entries(N.extras).map(([ve,rt])=>`${ve}=${rt}`).join(`
`):"")}O.actions.length>1&&d(f,!0)}d(o,!0)}function St(F){if(!F)return"?";if(F.type==="key_event"){const O=a().find(N=>N.code===F.keyCode)?.label||F.keyCode;let P=`${O} (${F.behavior})`;if(F.comboKeyCode){const N=a().find(ve=>ve.code===F.comboKeyCode)?.label||F.comboKeyCode;P=`${O} + ${N} (${F.behavior})`}return P}return F.type}function nt(F){return F?F.type:"?"}async function _t(){d(q,await u()(i(tt)))}function pt(){if(i(k)==="builtin_command")return{type:"builtin_command",command:i(T)};if(i(k)==="launch_app")return{type:"launch_app",package:i(I),activity:i(U)||void 0};if(i(k)==="run_shell")return{type:"run_shell",command:i(X)};if(i(k)==="send_key")return{type:"send_key",keyCode:Number(i(z))};if(i(k)==="volume_control")return{type:"volume_control",direction:i(Ae)};if(i(k)==="brightness_control")return{type:"brightness_control",direction:i(Te)};if(i(k)==="toggle_screen")return{type:"toggle_screen"};if(i(k)==="intercept")return{type:"intercept"};if(i(k)==="launch_intent"){const F={};if(i(Oe).trim())for(const P of i(Oe).split(`
`)){const N=P.indexOf("=");N>0&&(F[P.substring(0,N).trim()]=P.substring(N+1).trim())}const O=i(Ce).split(",").map(P=>P.trim()).filter(Boolean);return{type:"launch_intent",intent:{action:i(j)||void 0,package:i(le)||void 0,className:i(L)||void 0,data:i(Ie)||void 0,category:O.length?O:[],extras:Object.keys(F).length?F:{}}}}return{type:i(k)}}function h(){if(i(f))return;const F=i(g)==="custom"?Number(i(A)):Number(i(g));let O=null;vt.has(i(p))&&(O=Number(i(E)));const P={type:"key_event",keyCode:F,comboKeyCode:O,behavior:i(p)},N=pt(),ve={id:i(c)!==null?n()[i(c)].id:null,description:i(v),enabled:i(w)==="true",conditionLogic:"and",conditions:[P],actions:[N]};l()(ve,i(c)),d(o,!1)}var y={openCreate:ze,openEdit:De};gn();var Z=qi(),Ke=m(Z),Le=_(m(Ke),2),wn=m(Le),ht=_(Ke,4);lt(ht,5,n,at,(F,O,P)=>{var N=Si(),ve=m(N),rt=m(ve),zt=m(rt);{var Gt=fe=>{var Pe=ki();K(fe,Pe)};xe(zt,fe=>{i(O),B(()=>!i(O).enabled)&&fe(Gt)})}var Zt=_(zt,2),Jt=m(Zt),Xt=_(Zt,4),Qt=m(Xt);{var xn=fe=>{var Pe=xr();Y(()=>oe(Pe,`${i(O),B(()=>i(O).actions.length)??""} actions`)),K(fe,Pe)},En=fe=>{var Pe=xr();Y(At=>oe(Pe,At),[()=>(i(O),B(()=>nt(i(O).actions?.[0])))]),K(fe,Pe)};xe(Qt,fe=>{i(O),B(()=>i(O).actions?.length>1)?fe(xn):fe(En,!1)})}var $t=_(rt,2),Ct=m($t),en=_(ve,2),Ot=m(en),kn=_(Ot,2);Y(fe=>{oe(Jt,fe),oe(Ct,(i(O),B(()=>i(O).description||"No description")))},[()=>(i(O),B(()=>St(i(O).conditions?.[0])))]),ce("click",Ot,()=>De(P)),ce("click",kn,()=>s()(P)),K(F,N)});var yn=_(ht,2);{var Mt=F=>{var O=Vi(),P=m(O),N=m(P),ve=m(N),rt=_(N,2);{var zt=x=>{var S=Mi(),M=m(S);Y(()=>oe(M,i(b))),K(x,S)};xe(rt,x=>{i(b)&&x(zt)})}var Gt=_(rt,2);{var Zt=x=>{var S=Ci();K(x,S)};xe(Gt,x=>{i(f)&&x(Zt)})}var Jt=_(Gt,2),Xt=m(Jt),Qt=m(Xt),xn=_(m(Qt)),En=_(Qt,2),$t=_(m(En)),Ct=m($t);Ct.value=Ct.__value="true";var en=_(Ct);en.value=en.__value="false";var Ot=_(Xt,2),kn=_(m(Ot),2),fe=_(m(kn),2),Pe=m(fe),At=_(m(Pe)),sr=m(At);lt(sr,1,a,at,(x,S)=>{var M=Oi(),W=m(M),G={};Y(ne=>{oe(W,(i(S),B(()=>i(S).label))),G!==(G=ne)&&(M.value=(M.__value=ne)??"")},[()=>(i(S),B(()=>String(i(S).code)))]),K(x,M)});var or=_(sr);or.value=or.__value="custom";var ha=_(Pe,2);{var ma=x=>{var S=Ai(),M=_(m(S));Y(()=>M.disabled=i(f)),ee(M,()=>i(A),W=>d(A,W)),K(x,S)};xe(ha,x=>{i(g)==="custom"&&x(ma)})}var ba=_(fe,2),ur=m(ba),Sn=_(m(ur));lt(Sn,5,()=>B(()=>Array.from(be)),at,(x,S)=>{var M=Ti(),W=m(M),G={};Y(()=>{oe(W,i(S)),G!==(G=i(S))&&(M.value=(M.__value=i(S))??"")}),K(x,M)});var ga=_(ur,2);{var wa=x=>{var S=Pi(),M=_(m(S));lt(M,5,r,at,(W,G)=>{var ne=Li(),Ne=m(ne),$={};Y(J=>{oe(Ne,(i(G),B(()=>i(G).label))),$!==($=J)&&(ne.value=(ne.__value=J)??"")},[()=>(i(G),B(()=>String(i(G).code)))]),K(W,ne)}),Y(()=>M.disabled=i(f)),Fe(M,()=>i(E),W=>d(E,W)),K(x,S)},ya=Wn(()=>(i(p),B(()=>vt.has(i(p)))));xe(ga,x=>{i(ya)&&x(wa)})}var xa=_(Ot,2),fr=_(m(xa),2),Mn=_(m(fr)),Cn=m(Mn);Cn.value=Cn.__value="builtin_command";var On=_(Cn);On.value=On.__value="launch_app";var An=_(On);An.value=An.__value="run_shell";var Tn=_(An);Tn.value=Tn.__value="send_key";var Ln=_(Tn);Ln.value=Ln.__value="launch_intent";var Pn=_(Ln);Pn.value=Pn.__value="volume_control";var Nn=_(Pn);Nn.value=Nn.__value="brightness_control";var Rn=_(Nn);Rn.value=Rn.__value="toggle_screen";var cr=_(Rn);cr.value=cr.__value="intercept";var Ea=_(fr,2),ka=m(Ea);{var Sa=x=>{var S=Ri();lt(S,5,()=>B(()=>Object.entries(kt)),at,(M,W)=>{var G=Wn(()=>tl(i(W),2));let ne=()=>i(G)[0],Ne=()=>i(G)[1];var $=Ni(),J=m($),mt={};Y(()=>{oe(J,`${Ne()??""} (${ne()??""})`),mt!==(mt=ne())&&($.value=($.__value=ne())??"")}),K(M,$)}),Y(()=>S.disabled=i(f)),Fe(S,()=>i(T),M=>d(T,M)),K(x,S)},Ma=x=>{var S=Ki(),M=zr(S),W=_(M,2);{var G=$=>{var J=Di(),mt=m(J);mt.value=mt.__value="";var Na=_(mt);lt(Na,1,()=>i(q),at,(In,bt)=>{var tn=Ii(),Ra=m(tn),_r={};Y(()=>{oe(Ra,(i(bt),B(()=>i(bt).name))),_r!==(_r=(i(bt),B(()=>i(bt).package)))&&(tn.value=(tn.__value=(i(bt),B(()=>i(bt).package)))??"")}),K(In,tn)}),Y(()=>J.disabled=i(f)),Fe(J,()=>i(I),In=>d(I,In)),ce("change",J,()=>d(U,"")),K($,J)};xe(W,$=>{i(q),B(()=>i(q).length)&&$(G)})}var ne=_(W,2),Ne=_(ne,2);Y(()=>{M.disabled=i(f),ne.disabled=i(f),Ne.disabled=i(f)}),ee(M,()=>i(tt),$=>d(tt,$)),ce("change",M,_t),ee(ne,()=>i(I),$=>d(I,$)),ee(Ne,()=>i(U),$=>d(U,$)),K(x,S)},Ca=x=>{var S=Fi();Y(()=>S.disabled=i(f)),ee(S,()=>i(X),M=>d(X,M)),K(x,S)},Oa=x=>{var S=Bi();Y(()=>S.disabled=i(f)),ee(S,()=>i(z),M=>d(z,M)),K(x,S)},Aa=x=>{var S=ji(),M=m(S);M.value=M.__value="up";var W=_(M);W.value=W.__value="down",Y(()=>S.disabled=i(f)),Fe(S,()=>i(Ae),G=>d(Ae,G)),K(x,S)},Ta=x=>{var S=Hi(),M=m(S);M.value=M.__value="up";var W=_(M);W.value=W.__value="down",Y(()=>S.disabled=i(f)),Fe(S,()=>i(Te),G=>d(Te,G)),K(x,S)},La=x=>{var S=Ui(),M=m(S),W=_(M,2),G=_(W,2),ne=_(G,2),Ne=_(ne,2),$=_(Ne,2);Y(()=>{M.disabled=i(f),W.disabled=i(f),G.disabled=i(f),ne.disabled=i(f),Ne.disabled=i(f),$.disabled=i(f)}),ee(M,()=>i(j),J=>d(j,J)),ee(W,()=>i(le),J=>d(le,J)),ee(G,()=>i(L),J=>d(L,J)),ee(ne,()=>i(Ie),J=>d(Ie,J)),ee(Ne,()=>i(Ce),J=>d(Ce,J)),ee($,()=>i(Oe),J=>d(Oe,J)),K(x,S)};xe(ka,x=>{i(k)==="builtin_command"?x(Sa):i(k)==="launch_app"?x(Ma,1):i(k)==="run_shell"?x(Ca,2):i(k)==="send_key"?x(Oa,3):i(k)==="volume_control"?x(Aa,4):i(k)==="brightness_control"?x(Ta,5):i(k)==="launch_intent"&&x(La,6)})}var Pa=_(Jt,2),dr=m(Pa),vr=_(dr,2);Y(()=>{oe(ve,i(c)===null?"新增规则":"编辑规则"),At.disabled=i(f),Sn.disabled=i(f),Mn.disabled=i(f),vr.disabled=i(f)}),ee(xn,()=>i(v),x=>d(v,x)),Fe($t,()=>i(w),x=>d(w,x)),Fe(At,()=>i(g),x=>d(g,x)),Fe(Sn,()=>i(p),x=>d(p,x)),Fe(Mn,()=>i(k),x=>d(k,x)),ce("click",dr,()=>d(o,!1)),ce("click",vr,h),K(F,O)};xe(yn,F=>{i(o)&&F(Mt)})}return Y(()=>Je(wn,"src",pa)),ce("click",Le,ze),K(e,Z),Jn(t,"openCreate",ze),Jn(t,"openEdit",De),vn(y)}var Yi=H('<main class="mx-auto w-full max-w-7xl px-3 py-5 md:px-5"><section class="rounded-2xl border border-slate-700/70 bg-slate-900/80 p-4 shadow-2xl md:p-5"><header class="mb-4 flex flex-col gap-4 md:flex-row md:items-start md:justify-between"><div><p class="text-xs uppercase tracking-[0.22em] text-slate-400">Rust Keymapper</p> <h1 class="mt-1 text-3xl font-bold tracking-tight text-white">PowerKeyRules</h1> <p class="mt-2 text-sm text-slate-400"> <span class="text-amber-400"> </span></p></div> <div class="flex flex-wrap gap-2"><button class="btn-secondary"><img alt="" class="h-4 w-4"/> Reload</button> <button class="btn-primary"><img alt="" class="h-4 w-4"/> Save to YAML</button></div></header> <!> <!> <!></section></main>');function zi(e,t){dn(t,!1);const n=C(),a=C(),r=C();let l=C("Ready."),s=C(c()),u=[];const o={async getConfig(){const h=await fetch("/api/config");if(!h.ok)throw new Error(await h.text()||`HTTP ${h.status}`);return h.json()},async saveConfig(h){const y=await fetch("/api/config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(!y.ok)throw new Error(await y.text()||`HTTP ${y.status}`)},async getApps(){const h=await fetch("/api/apps");if(!h.ok)throw new Error(await h.text()||`HTTP ${h.status}`);return h.json()},async startLearning(){const h=await fetch("/api/system/learn-start",{method:"POST"});if(!h.ok)throw new Error(await h.text()||`HTTP ${h.status}`)},async getLearnResult(){const h=await fetch("/api/system/learn-result");if(!h.ok)throw new Error(await h.text()||`HTTP ${h.status}`);return h.json()}};va(le);function c(){return{version:1,deviceName:"",hardwareMap:{116:"POWER",115:"VOL_UP",114:"VOL_DOWN",102:"HOME",139:"MENU"},doublePressIntervalMs:300,longPressMinMs:800,shortPressMinMs:300,combinationTimeoutMs:200,ruleTimeoutMs:5e3,rules:[]}}function f(h){return Object.entries(h||{}).map(([y,Z])=>({code:Number(y),name:String(Z||"")})).filter(y=>Number.isInteger(y.code)&&y.code>=0&&y.name).sort((y,Z)=>y.code-Z.code)}function b(h){const y=[{label:"POWER",code:116},{label:"VOL_UP",code:115},{label:"VOL_DOWN",code:114}];return h.length?h.map(Z=>({code:Z.code,label:`${Z.name} (${Z.code})`})):y}function v(h){d(s,{...i(s),hardwareMap:h})}function w(h,y){if(Object.values(i(s).hardwareMap).includes(h))return alert(`Name ${h} exists`);if(i(s).hardwareMap[y]!==void 0)return alert(`Code ${y} already mapped to ${i(s).hardwareMap[y]}`);v({...i(s).hardwareMap,[y]:h}),d(l,`Added key ${h}`)}function g(h){const y={...i(s).hardwareMap};delete y[h.code],v(y),d(l,`Deleted key ${h.name}`)}function A(h){const y=prompt("New name:",h.name);y&&y.trim()&&v({...i(s).hardwareMap,[h.code]:y.trim()})}async function p(){return await o.startLearning(),new Promise((h,y)=>{let Z=0;const Ke=setInterval(async()=>{try{const Le=await o.getLearnResult();Le.status==="captured"?(clearInterval(Ke),h(Number(Le.keyCode))):Le.status==="timeout"&&(clearInterval(Ke),y(new Error("Timeout"))),Z++>60&&(clearInterval(Ke),y(new Error("Global Timeout")))}catch(Le){clearInterval(Ke),y(Le)}},500)})}async function E(){return p()}async function k(h){if(confirm(`Learn new code for ${h.name}?`))try{const y=await p(),Z={...i(s).hardwareMap};delete Z[h.code],Z[y]=h.name,v(Z),d(l,`Updated ${h.name} to code ${y}`)}catch(y){alert(y.message)}}function T(h){d(s,{...i(s),...h}),d(l,"Global settings applied (unsaved)")}function I(h,y){const Z=[...i(s).rules];y===null?Z.push(h):Z[y]=h,d(s,{...i(s),rules:Z}),d(l,"Rule updated (unsaved)")}function U(h){const y=[...i(s).rules];y.splice(h,1),d(s,{...i(s),rules:y}),d(l,"Rule deleted (unsaved)")}async function X(h){return u.length||(u=(await o.getApps()).apps||[]),h=h.toLowerCase(),u.filter(y=>(y.package||"").toLowerCase().includes(h)||(y.name||"").toLowerCase().includes(h))}function z(h){const y=c();return{...y,...h,hardwareMap:h.hardwareMap||y.hardwareMap,rules:h.rules||[]}}let j=C();async function le(){try{const h=await o.getConfig();d(s,z(h||{})),i(j)&&i(j).loadFromConfig(i(s)),d(l,"Config loaded")}catch(h){d(l,"Load failed: "+h.message)}}function L(){return{version:1,deviceName:i(s).deviceName||"",hardwareMap:i(s).hardwareMap||{},doublePressIntervalMs:i(s).doublePressIntervalMs,longPressMinMs:i(s).longPressMinMs,shortPressMinMs:i(s).shortPressMinMs,combinationTimeoutMs:i(s).combinationTimeoutMs,ruleTimeoutMs:i(s).ruleTimeoutMs,rules:(i(s).rules||[]).map(h=>({id:h.id||null,enabled:h.enabled!==!1,description:h.description||"",conditionLogic:h.conditionLogic||"and",conditions:h.conditions||[],actions:h.actions||[]}))}}async function Ie(){try{await o.saveConfig(L()),d(l,"Saved to YAML")}catch(h){d(l,"Save failed: "+h.message)}}Kn(()=>i(s),()=>{d(n,f(i(s).hardwareMap))}),Kn(()=>i(n),()=>{d(a,b(i(n)))}),Kn(()=>i(a),()=>{d(r,i(a))}),Bl(),gn();var Ce=Yi(),Oe=m(Ce),Ae=m(Oe),Te=m(Ae),tt=_(m(Te),4),q=m(tt),be=_(q),vt=m(be),kt=_(Te,2),ae=m(kt),ze=m(ae),De=_(ae,2),St=m(De),nt=_(Ae,2);ui(pi(nt,{get config(){return i(s)},onApply:T,$$legacy:!0}),h=>d(j,h),()=>i(j));var _t=_(nt,2);Ei(_t,{get hardwareEntries(){return i(n)},onAddKey:w,onDeleteKey:g,onRenameKey:A,onLearnNew:E,onLearnFor:k});var pt=_(_t,2);Wi(pt,{get rules(){return i(s),B(()=>i(s).rules)},get keyOptions(){return i(a)},get comboOptions(){return i(r)},onSaveRule:I,onDeleteRule:U,onSearchApps:X}),Y(()=>{oe(q,`Device: ${i(s),B(()=>i(s).deviceName||"(Pending)")??""} | Status: `),oe(vt,i(l)),Je(ze,"src",di),Je(St,"src",vi)}),ce("click",ae,le),ce("click",De,Ie),K(e,Ce),vn()}new zi({target:document.getElementById("app")});
